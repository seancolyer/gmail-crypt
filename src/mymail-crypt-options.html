<!--
/* This is the options page for mymail-crypt for Gmail.
*
* Copyright 2011 Sean Colyer, <sean @ colyer . name>
* This program is licensed under the GNU General Public License Version 2.
* See included "LICENSE" file for details.
*/
-->
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="lib/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="lib/docs.css"/>
    <link rel="stylesheet" type="text/css" href="mymail-crypt-options.css"/>
  </head>

  <body>
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <div class="nav-collapse">
            <ul class="nav" id="navbar">
              <li><a href="#homeSpan" class="linkLocal">home</a></li>
              <li><a href="#optionsSpan" class="linkLocal">options</a></li>
              <li><a href="#privateKeySpan" class="linkLocal">my keys</a></li>
              <li><a href="#publicKeySpan" class="linkLocal">friends' keys</a></li>
              <li><a href="#helpSpan" class="linkLocal">help</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <header class="jumbotron subhead">
    <div class="container">
      <h1>mymail-crypt for Gmail options</h1>
      <div class="subnav subnav-fixed">
      </div>
    </div>
    </header>

    <div class="container">
      <div id="mainColumn">
        <span id="homeSpan">
          <h2>Home</h2>
          <p>
          Welcome to mymail-crypt for Gmail!
          <ul>
            <li>Use the "my keys" section to <strong>generate</strong> a new OpenPGP key, <strong>import</strong> an existing key, or <strong>remove</strong> a key from the system. This manages private keys.</li>
            <li>Use the "friends' keys" section to <strong>import</strong> or <strong>remove</strong> keys from your friends. This manages public keys</li>
            <li>Use the "help" section for <strong>troubleshooting</strong>, and <strong>background information</strong>.</li>
          </ul>
          </p>
          <p>
          <strong>Make sure that you keep backup copies of all the keys you generate. If they're lost, they're lost.</strong>
          </p>
          <p>
          <strong>Before using this extension please read the "help" page and be aware of the security concerns. Also please be aware that the license of this software clearly states this comes WITHOUT ANY WARRANTY.</strong>
          </p>
        </span>
        <span id="optionsSpan">
          <h2>options</h2>
          <strong>Please make sure that you reload your gmail page to be sure these changes take effect.</strong>
          <form id="optionsForm" class="well">
            <label class="checkbox">
              <input type="checkbox" id="stopAutomaticDrafts">stop automatic draft uploading. (EXPERIMENTAL -- Currently only works with "New Compose", does not support "popped out" compose mode)
            </label>
            <label class="checkbox">
              <input type="checkbox" id="includeMyself">add myself as an encrypted recipient on all messages. Allows decrypting sent messages.
            </label>
            <!-- TODO re-implement this when openpgp.js has fixed config.
            <label class="checkbox">
              <input type="checkbox" id="showComment">show comment in OpenPGP messages.
            </label>
            <label class="checkbox">
              <input type="checkbox" id="showVersion">show version in OpenPGP messages.
            </label>
            -->
            <br/>
            <div class="form-actions">
              <button id="optionsFormSubmit" type="submit" value="submit" class="btn btn-primary">save</button>
            </div>
          </form>
        </span>
        <span id="privateKeySpan">
          <h2>my private keys:</h2>
          <table id="privateKeyTable" class="table table-condensed">
            <thead>
              <tr>
                <th>
                </th>
                <th>name
                </th>
                <th>email
                </th>
              </tr>
            </thead>
            <tbody>
            </tbody>
          </table>

          <a href="#"><h2 id="insertPrivateKeyTitle">insert private key:</h2></a>
          <form id="insertPrivateKeyForm" class="well">
            <label>Key</label>
            <textarea id="newPrivateKey" class="input-xxlarge" rows=10></textarea>
            <br/>
            <div class="form-actions">
              <button id="insertPrivateKeyFormSubmit" type="submit" value="submit" class="btn btn-primary">submit</button>
            </div>
          </form>
          <a href="#"><h2 id="generateKeyPairTitle">generate a new key:</h2></a>
          <form id="generateKeyPairForm" class="well"><br/>
            <div>
              <input class="input-large" type="text" id="name" placeholder="your name"/><br/>
            </div>
            <div>
              <input class="input-large" type="text" id="email" placeholder="your email"/><br/>
            </div>
            <div>
              <input class="input-large" type="password" id="password" placeholder="password"/><br/>
            </div>
            <label>Key bit-length</label>
            <select id="numBits">
              <option value="1024">1024</option>
              <option value="2048" selected="yes">2048</option>
            </select><br/><br/>
            <div class="form-actions">
              <button id="generateKeyPairFormSubmit" type="submit" value="submit" class="btn btn-primary">submit</button>
              <strong>Please note: key generation may take a few seconds after you submit.</strong>
            </div>
          </form>
        </span>
        <span id="publicKeySpan">
          <h2>my friends' public keys:</h2>
          <table id="publicKeyTable" class="table table-condensed">
            <thead class="table table-condensed">
              <tr>
                <th>
                </th>
                <th>name
                </th>
                <th>email
                </th>
                <th>key id
                </th>
              </tr>
            </thead>
            <tbody>
            </tbody>
          </table>

          <a href="#"><h2 id="insertPublicKeyTitle">insert public key:</h2></a>
          <form id="insertPublicKeyForm" class="well">
            <textarea id="newPublicKey" class="input-xxlarge" rows=10></textarea>
            <div class="form-actions">
              <button id="insertPublicKeyFormSubmit" type="submit" value="submit" class="btn btn-primary">submit</button>
            </div>
          </form>
        </span>
        <span id="helpSpan">
          <h2>Help!</h2>
          <p>
          For the most up-to-date information, please check our <a href="https://github.com/seancolyer/gmail-crypt">project home page</a>.<br/>
          </p>
          <h3>How do I use this extension?</h3>
          <p>
          <ol>
            <li>Generate a key under "my keys" or insert an existing armored secret key (generated by GPG or other OpenPGP software)</li>
            <li>In "friends' keys" use the "insert public key" text area to paste public keys from your friends</li>
            <li>In gmail, when sending an email look for the "encrypt me" option on the upper right-hand side of the draft</li>
            <li>In gmail, when receiving an encrypted email look for the "decrypt me" option on the upper right-hand side of the draft</li>
          </ol>
          </p>
          <h3>Is it safe?</h3>
          <p>
          This project aims to bring OpenPGP security to Gmail. However, there are some special considerations.
          <ul>
            <li>DO NOT use this on a shared computer. This extension is not (yet) multi-user capable.</li>
            <li>This release still allows drafts to be uploaded to Gmail servers. Unencrypted drafts could be stored on Gmail servers.</li>
            <li>Storing private keys in browser. The extension will run under it's own domain but it might be possible for malicious entities to access it.</li>
            <li>Password input into the DOM. Currently input for passwords is done directly into the DOM. This means it would be conceivable for gmail to acquire this password. It is important to note that private keys are stored in the context of the extension and not gmail's context.</li>
            <li>Cryptographically Secure Pseudo Random Number Generator. OpenPGP.js uses window.crypto.* for random number generation, the quality of this is browser dependent. By definition this should be a good source, but is an externality to consider.</li>
          </ul>
          </p>
          <h3>Troubleshooting</h3>
          <p>
          <ul>
            <li>This extension supports a limited subset of the possible OpenPGP implementations. RSA/AES/SHA1/CAST128 are supported.</li>
            <li>This extension is aimed at the newest displays of gmail and is generally untested with Labs addons, try the simplest most up to date view you can get</li>
            <li>If a message is unable to be decoded, it could be from weird formatting from gmail, if you have the ability, please send the html code of the text you are attempting to decrypt (F12->Elements->Magnifying Glass)</li>
          </ul>
          </p>
          <p>
          <h3>OpenPGP.js</h3>
          The OpenPGP implementation is <a href="https://github.com/openpgpjs/openpgpjs">OpenPGP.js</a>, it is an open source project based off of the initial work for <a href="http://gpg4browsers.recurity.com/">GPG4Browsers</a>. The project aims to be fully OpenPGP compliant.
          </p>
          <h3>Community/Licensing</h3>
          <p>
          Yes, your contributions would be welcome! Please see the attached LICENSE file for full License information. Please visit our <a href="https://github.com/seancolyer/gmail-crypt">project home page</a> if you're interested.
          </p>
          <h3>Related Works</h3>
          <p>
          <ul>
            <li><a href = "http://gpgtools.github.com/Mobile">GPGTools</a> is working on using a JavaScript implementation of OpenPGP for a mobile app.</li>
            <li><a href="http://blog.thinkst.com/2011/09/chrome-extension-for-gpg-in-gmail.html">Thinkst has released an extension</a> that performs a very similar feature. However, rather than using a Javascript implementation, it uses a user-installed GPG binary on the local filesystem.</li>
            <li><a href="http://getfiregpg.org/s/home">FireGPG</a> used to be very similar. It runs only in FireFox. It has stopped supporting Gmail</li>
            <li><a href="http://gpg4browsers.recurity.com/">GPG4Browsers</a> I discovered this project after releasing my initial version. We have taken slightly different approaches to the same problem and will likely work together in the very near future...</li>
            <li><a href="https://github.com/toberndo/mailvelope">Mailvelope</a> this is a very similar project that uses OpenPGP.js to generically solve gpg-email.</li>
            </li>
          </ul>
          </p>
        </span>
      </div>
      <footer class="footer">
      <p>
      mymail-crypt for Gmail<br/>
      <a href="https://github.com/seancolyer/gmail-crypt" class="linkLocal">project page</a> |
      <a href="LICENSE">license</a>
      </p>
      </footer>
    </div>
  </body>

  <script src='mymail-crypt-util.js'></script>
  <script src='lib/jquery-2.1.0.min.js'></script>
  <script src='lib/lodash-2.4.1.js'></script>
  <script src='lib/bootstrap.min.js'></script>
  <script src='lib/openpgp.js'></script>
  <script src='mymail-crypt-options.js'></script>

</html>
